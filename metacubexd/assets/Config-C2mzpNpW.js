import{$ as e,$t as t,At as n,B as r,Bt as i,Cn as a,Ct as o,Et as s,F as c,Ft as l,Gt as u,H as d,I as f,It as p,J as m,L as h,Lt as g,M as _,N as v,Ot as y,P as ee,R as te,St as b,Tt as ne,V as x,_n as S,_t as C,an as w,ct as re,dn as T,dt as ie,et as ae,f as E,ft as D,gn as O,gt as k,hn as A,ht as oe,kt as j,ln as M,m as N,mn as P,on as F,pn as se,pt as I,rn as L,s as R,sn as z,t as B,tt as V,un as H,v as U,vn as W,y as G,z as K,zt as q}from"./index-DfLdPrjg.js";var ce=w(`<input type=checkbox>`),le=w(`<input>`),ue=w(`<select>`),de=w(`<label>`),fe=w(`<option>A`),pe=w(`<option>AAAA`),me=w(`<option>CNAME`),he=w(`<option>TXT`),ge=w(`<option>MX`),_e=w(`<option>SRV`),ve=w(`<option>HTTPS`),ye=w(`<option>NS`),be=w(`<option>DNSKEY`),xe=w(`<option>DS`),Se=w(`<option>SIG`),Ce=w(`<option>SOA`),we=w(`<option>RRSIG`),Te=w(`<option>RP`),Ee=w(`<div class="flex flex-col overflow-auto p-4">`),De=w(`<div class="flex flex-col"><form class=join>`),Oe=w(`<div class=py-2>`),ke=w(`<div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset>`),Ae=w(`<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">`),je=w(`<div class="flex flex-col gap-4"><div class="grid grid-cols-3 gap-2"><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset><fieldset class=fieldset></fieldset></div><div class="grid grid-cols-2 gap-4 sm:grid-cols-2">`),J=w(`<option>`),Y=w(`<fieldset class=fieldset>`),Me=w(`<div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col">`),Ne=w(`<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col"></div><div class="flex flex-col"></div><div class="flex flex-col"></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><div class=h-10>`),Pe=w(`<div class="mx-auto flex max-w-3xl flex-col gap-4">`),X=e=>{let[t,n]=a(e,[`class`]);return(()=>{var e=ce();return L(e,W({get class(){return i(`toggle`,t.class)}},n),!1,!1),e})()},Z=e=>{let[t,n]=a(e,[`class`]);return(()=>{var e=le();return L(e,W({get class(){return i(`input min-w-0`,t.class)}},n),!1,!1),e})()},Q=e=>{let[n,r]=a(e,[`class`]);return(()=>{var e=ue();return L(e,W({get class(){return i(`select`,n.class)}},r),!1,!0),t(e,()=>H(()=>r.children)()),e})()},$=e=>{let[n,r]=a(e,[`class`]);return(()=>{var e=de();return L(e,W({get class(){return i(`label truncate`,n.class)}},r),!1,!0),t(e,()=>H(()=>r.children)()),e})()},Fe=j({name:n(),type:n()}),Ie=()=>{let[e]=C(),n=G(),r=`google.com`,{form:i,isSubmitting:a}=p({extend:l({schema:Fe}),onSubmit:e=>n.get(`dns/query`,{searchParams:{name:e.name||r,type:e.type}}).json().then(({Answer:e})=>s(e?.map(({data:e})=>e)||[])).catch(e=>u.error(e.message))}),[o,s]=S([]);return(()=>{var n=De(),c=n.firstChild;return F(i,c,()=>i),t(c,T(Z,{type:`search`,name:`name`,class:`join-item w-full`,placeholder:r,onInput:e=>{e.target.value||s([])}}),null),t(c,T(Q,{name:`type`,class:`join-item max-w-max`,get children(){return[fe(),pe(),me(),he(),ge(),_e(),ve(),ye(),be(),xe(),Se(),Ce(),we(),Te()]}}),null),t(c,T(q,{type:`submit`,class:`join-item max-w-max btn-primary`,get loading(){return a()},get children(){return e(`dnsQuery`)}}),null),t(n,T(M,{get when(){return o().length>0},get children(){var e=Ee();return t(e,T(z,{get each(){return o()},children:e=>(()=>{var n=Oe();return t(n,e),n})()})),e}}),null),n})()},Le=j({port:y(),"socks-port":y(),"redir-port":y(),"tproxy-port":y(),"mixed-port":y()}),Re=({isSingBox:e})=>{let[n]=C(),i=[{label:()=>n(`port`,{name:`Mixed`}),key:`mixed-port`,onChange:e=>void r(`mixed-port`,Number(e.target.value),m)},{label:()=>n(`port`,{name:`HTTP`}),key:`port`,onChange:e=>void r(`port`,Number(e.target.value),m)},{label:()=>n(`port`,{name:`Socks`}),key:`socks-port`,onChange:e=>void r(`socks-port`,Number(e.target.value),m)},{label:()=>n(`port`,{name:`Redir`}),key:`redir-port`,onChange:e=>void r(`redir-port`,Number(e.target.value),m)},{label:()=>n(`port`,{name:`TProxy`}),key:`tproxy-port`,onChange:e=>void r(`tproxy-port`,Number(e.target.value),m)}],{form:a,setInitialValues:o,reset:s}=p({extend:l({schema:Le})}),[u,{refetch:m}]=O(_);se(()=>{let e=u();e&&(o(e),s())});let g=P(()=>{let e=u();return e?.[`mode-list`]||e?.modes||[`rule`,`direct`,`global`]});return(()=>{var o=je(),s=o.firstChild,l=s.firstChild,p=l.nextSibling,_=p.nextSibling,v=s.nextSibling;return t(l,T($,{for:`enable-allow-lan`,get children(){return n(`allowLan`)}}),null),t(l,T(X,{id:`enable-allow-lan`,get checked(){return u()?.[`allow-lan`]},onChange:e=>void r(`allow-lan`,e.target.checked,m)}),null),t(p,T($,{for:`mode`,get children(){return n(`runningMode`)}}),null),t(p,T(Q,{id:`mode`,onChange:e=>void r(`mode`,e.target.value,m),get children(){return T(z,{get each(){return g()},children:e=>(()=>{var r=J();return r.value=e,t(r,()=>n(e)??e),A(()=>r.selected=e===u()?.mode),r})()})}}),null),t(_,T($,{for:`interface-name`,get children(){return n(`outboundInterfaceName`)}}),null),t(_,T(Z,{id:`interface-name`,get value(){return u()?.[`interface-name`]},onChange:e=>void r(`interface-name`,e.target.value,m)}),null),t(o,T(M,{get when(){return!e()},get children(){return[(()=>{var e=ke(),i=e.firstChild,a=i.nextSibling,o=a.nextSibling;return t(i,T($,{for:`enable-tun-device`,get children(){return n(`enableTunDevice`)}}),null),t(i,T(X,{id:`enable-tun-device`,get checked(){return u()?.tun?.enable},onChange:e=>void r(`tun`,{enable:e.target.checked},m)}),null),t(a,T($,{for:`tun-ip-stack`,get children(){return n(`tunModeStack`)}}),null),t(a,T(Q,{id:`tun-ip-stack`,onChange:e=>void r(`tun`,{stack:e.target.value},m),get children(){return T(z,{each:[`Mixed`,`gVisor`,`System`,`LWIP`],children:e=>(()=>{var n=J();return n.value=e,t(n,e),A(()=>n.selected=u()?.tun?.stack===e),n})()})}}),null),t(o,T($,{for:`device-name`,get children(){return n(`tunDeviceName`)}}),null),t(o,T(Z,{id:`device-name`,get value(){return u()?.tun?.device},onChange:e=>void r(`tun`,{device:e.target.value},m)}),null),e})(),(()=>{var e=Ae();return F(a,e,()=>a),t(e,T(z,{each:i,children:e=>(()=>{var n=Y();return t(n,T($,{get for(){return e.key},get children(){return e.label()}}),null),t(n,T(Z,{get id(){return e.key},get name(){return e.key},type:`number`,get placeholder(){return e.label()},get onChange(){return e.onChange}}),null),n})()})),e})()]}}),v),t(v,T(q,{class:`btn-primary`,get loading(){return h()},onClick:f,get children(){return n(`reloadConfig`)}}),null),t(v,T(q,{class:`btn-accent`,get loading(){return c()},onClick:ee,get children(){return n(`flushFakeIP`)}}),null),t(v,T(q,{class:`btn-warning`,get loading(){return K()},onClick:te,get children(){return n(`restartCore`)}}),null),t(v,T(M,{get when(){return!e()},get children(){return T(q,{class:`btn-secondary`,get loading(){return d()},onClick:x,get children(){return n(`updateGEODatabases`)}})}}),null),o})()},ze=()=>{let[n]=C(),r=E(),i=[{label:`English`,value:o.EN},{label:`简体中文`,value:o.ZH},{label:`Русский`,value:o.RU}],a=[{label:`SystemUI`,value:b.SystemUI},{label:`FiraSans`,value:b.FiraSans}];return(()=>{var o=Ne(),c=o.firstChild,l=c.firstChild,u=l.nextSibling,d=u.nextSibling,f=c.nextSibling,p=f.firstChild,h=p.firstChild;return t(l,T(g,{get children(){return n(`switchFont`)}}),null),t(l,T(Q,{class:`w-full`,onChange:e=>I(e.target.value),get children(){return T(z,{each:a,children:e=>(()=>{var n=J();return t(n,()=>e.label),A(()=>n.selected=V()===e.value),A(()=>n.value=e.value),n})()})}}),null),t(u,T(g,{get children(){return n(`switchLanguage`)}}),null),t(u,T(Q,{class:`w-full`,onChange:e=>k(e.target.value),get children(){return T(z,{each:i,children:e=>(()=>{var n=J();return t(n,()=>e.label),A(()=>n.selected=oe()===e.value),A(()=>n.value=e.value),n})()})}}),null),t(d,T(g,{get children(){return N()?.url}}),null),t(d,T(q,{class:`btn-info`,onClick:()=>{U(``),r(ne.Setup)},get children(){return n(`switchEndpoint`)}}),null),t(p,T(g,{get children(){return n(`autoSwitchTheme`)}}),h),t(h,T(X,{get checked(){return m()},onChange:e=>re(e.target.checked)})),t(f,T(M,{get when(){return m()},get children(){var r=Me(),i=r.firstChild,a=i.nextSibling;return t(i,T(g,{get children(){return n(`favDayTheme`)}}),null),t(i,T(Q,{class:`w-full`,onChange:e=>ie(e.target.value),get children(){return T(z,{each:s,children:n=>(()=>{var r=J();return r.value=n,t(r,n),A(()=>r.selected=e()===n),r})()})}}),null),t(a,T(g,{get children(){return n(`favNightTheme`)}}),null),t(a,T(Q,{class:`w-full`,onChange:e=>D(e.target.value),get children(){return T(z,{each:s,children:e=>(()=>{var n=J();return n.value=e,t(n,e),A(()=>n.selected=ae()===e),n})()})}}),null),r}}),null),o})()},Be=()=>{let e=E();if(!N())return e(`/setup`,{replace:!0}),null;let[n]=C(),[r]=O(v,{initialValue:``}),i=P(()=>r()?.includes(`sing-box`)||!1);return[T(R,{get children(){return n(`config`)}}),(()=>{var e=Pe();return t(e,T(M,{get when(){return!i()},get children(){return[T(g,{withDivider:!0,get children(){return n(`dnsQuery`)}}),T(Ie,{})]}}),null),t(e,T(g,{withDivider:!0,get children(){return n(`coreConfig`)}}),null),t(e,T(Re,{isSingBox:i}),null),t(e,T(g,{withDivider:!0,get children(){return n(`xdConfig`)}}),null),t(e,T(ze,{}),null),t(e,T(g,{withDivider:!0,get children(){return n(`version`)}}),null),t(e,T(M,{get when(){return!r.loading},get children(){return T(B,{frontendVersion:`v1.202.0`,backendVersion:r})}}),null),e})()]};export{Be as default};