import{$t as e,At as t,D as n,Ft as r,Gt as i,It as a,Mt as o,Qt as s,_ as c,_t as l,an as u,d,dn as f,f as p,g as m,h,hn as g,k as _,kt as v,ln as y,on as b,s as x,sn as S,v as C,xn as w,zt as T}from"./index-DfLdPrjg.js";var E=[];for(let e=0;e<256;++e)E.push((e+256).toString(16).slice(1));function D(e,t=0){return(E[e[t+0]]+E[e[t+1]]+E[e[t+2]]+E[e[t+3]]+`-`+E[e[t+4]]+E[e[t+5]]+`-`+E[e[t+6]]+E[e[t+7]]+`-`+E[e[t+8]]+E[e[t+9]]+`-`+E[e[t+10]]+E[e[t+11]]+E[e[t+12]]+E[e[t+13]]+E[e[t+14]]+E[e[t+15]]).toLowerCase()}var O,k=new Uint8Array(16);function A(){if(!O){if(typeof crypto>`u`||!crypto.getRandomValues)throw Error(`crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported`);O=crypto.getRandomValues.bind(crypto)}return O(k)}var j={randomUUID:typeof crypto<`u`&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function M(e,t,n){e||={};let r=e.random??e.rng?.()??A();if(r.length<16)throw Error(`Random bytes length must be >= 16`);if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){if(n||=0,n<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=r[e];return t}return D(r)}function N(e,t,n){return j.randomUUID&&!t&&!e?j.randomUUID():M(e,t,n)}var P=N,F=u(`<option>`),I=u(`<div class="mx-auto flex max-w-screen-sm flex-col items-center gap-4 py-10"><form class=contents><div class="flex w-full flex-col gap-4"><fieldset class=fieldset><label class=label for=url><span></span></label><input id=url name=url type=url class="input w-full"placeholder=http(s)://{hostname}:{port} list=defaultEndpoints><datalist id=defaultEndpoints><option value=http://127.0.0.1:9090></option></datalist></fieldset><fieldset class=fieldset><label class=label for=secret><span></span></label><input id=secret name=secret type=password class="input w-full"placeholder=secret></fieldset></div></form><div class="grid w-full grid-cols-2 gap-4">`),L=u(`<div class="badge flex w-full cursor-pointer items-center justify-between gap-4 py-4 badge-info"><span class=truncate>`),R=v({url:t().min(1),secret:t()}),z=()=>{let[t]=l(),s=d(),u=p(),v=e=>{C(e),u(`/overview`,{replace:!0})},E=async e=>{let t=h().find(t=>t.id===e);t&&await _(t.url,t.secret)&&v(e)},D=async({url:e,secret:t})=>{let r=n(e);if(!await _(r,t))return;let i=P(),a=h().slice(),o=a.find(e=>e.url===r);if(!o){c([{id:i,url:r,secret:t},...a]),v(i);return}o.secret=t,o.id=i,c(a),v(i)},{form:O}=a({extend:r({schema:R}),onSubmit:D,onError:e=>{let{message:t}=e;i.error(t)}}),k=e=>{m()===e&&C(``),c(h().filter(t=>t.id!==e))};return w(async()=>{let e=s.search||window.location.search||s.hash.match(/\?.*$/)?.[0]?.replace(`?`,``);if(!e)return;let t=new URLSearchParams(e);t.has(`hostname`)?await D({url:`${t.get(`http`)?`http:`:t.get(`https`)?`https:`:window.location.protocol}//${t.get(`hostname`)}${t.get(`port`)?`:${t.get(`port`)}`:``}`,secret:t.get(`secret`)??``}):h().length===0&&await D({url:`http://127.0.0.1:9090`,secret:``})}),[f(x,{get children(){return t(`setup`)}}),(()=>{var n=I(),r=n.firstChild,i=r.firstChild,a=i.firstChild,s=a.firstChild,c=s.firstChild,l=s.nextSibling.nextSibling;l.firstChild;var u=a.nextSibling.firstChild.firstChild,d=r.nextSibling;return b(O,r,()=>O),e(c,()=>t(`endpointURL`)),e(l,f(y,{get when(){return window.location.origin!==`http://127.0.0.1:9090`},get children(){var e=F();return g(()=>e.value=window.location.origin),e}}),null),e(u,()=>t(`secret`)),e(i,f(T,{type:`submit`,class:`uppercase btn-primary`,get children(){return t(`add`)}}),null),e(d,f(S,{get each(){return h()},children:({id:t,url:n})=>(()=>{var r=L(),i=r.firstChild;return r.$$click=()=>E(t),e(i,n),e(r,f(T,{class:`btn-circle text-white btn-ghost btn-xs`,onClick:e=>{e.stopPropagation(),k(t)},get children(){return f(o,{})}}),null),r})()})),n})()]};s([`click`]);export{z as default};