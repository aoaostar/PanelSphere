import{t as e}from"./IconChevronRight-wTMHX7wA.js";import{t}from"./IconReload-Af-AEi0w.js";import{$t as n,Bt as r,C as i,Dt as a,Nt as o,Pt as s,Qt as c,Rt as l,S as u,T as d,Zt as f,_n as p,_t as m,a as ee,an as h,dn as g,f as _,hn as v,i as y,it as b,ln as x,m as S,mn as C,n as te,nn as ne,nt as re,ot as w,q as ie,r as T,rt as E,s as ae,sn as D,st as O,un as k,vt as oe,w as se,x as ce,xn as le,zt as A}from"./index-DfLdPrjg.js";import{n as j}from"./dist-BorCnbPT.js";var M=s(`outline`,`brand-speedtest`,`BrandSpeedtest`,[[`path`,{d:`M5.636 19.364a9 9 0 1 1 12.728 0`}],[`path`,{d:`M16 9l-4 4`}]]),N=h(`<div class=mb-2>`),P=h(`<div class="flex gap-2"><div class=flex-1></div><div class=flex-1>`),F=h(`<div class="grid grid-cols-1 place-items-start gap-2">`);const I=e=>{let t=j(),r=C(()=>t.width>480);return()=>{let t=k(()=>e.children),i=e=>t()?.filter((t,n)=>n%2===e).map(e=>(()=>{var t=N();return n(t,e),t})());return O()&&r()?(()=>{var e=P(),t=e.firstChild,r=t.nextSibling;return n(t,()=>i(0)),n(r,()=>i(1)),e})():(()=>{var e=F();return n(e,t),e})()}};var ue=h(`<div class="flex h-full flex-col gap-2"><div class="flex items-center gap-2"><div class="tabs-box tabs gap-2 tabs-sm"></div><div class=ml-auto></div></div><div class="flex-1 overflow-y-auto">`),L=h(`<button><span></span><div class="badge badge-sm">`),R=h(`<div>`),z=h(`<span class=whitespace-nowrap>`),B=h(`<div class=space-y-2><div class="flex items-center justify-between pr-8"><div class="flex items-center"><span></span><div class="ml-2 badge badge-sm"></div></div></div><div class="flex flex-wrap items-center justify-between gap-2"><div class="badge badge-sm badge-primary"><span class=font-bold></span></div><div class="badge badge-sm badge-secondary">/s`),V=h(`<img>`),H=h(`<div class="flex items-center justify-between pr-8"><div class="flex flex-wrap items-center gap-1"><span class="line-clamp-1 break-all"></span><div class="badge badge-sm"></div><div class="badge badge-sm"></div></div><div class="flex items-center gap-2">`),de=h(`<div class="flex flex-col gap-2"><div class="text-sm text-slate-500"> `),U=function(e){return e.proxyProviders=`proxyProviders`,e.proxies=`proxies`,e}(U||{}),W=()=>{let s=_();if(!S())return s(`/setup`,{replace:!0}),null;let c,[h]=m(),{fetchProxies:O,proxies:k,selectProxyInGroup:j,proxyProviders:N,updateProviderByProviderName:P,updateAllProvider:F,proxyGroupLatencyTest:W,proxyProviderLatencyTest:fe,proxyGroupLatencyTestingMap:G,proxyProviderLatencyTestingMap:K,isAllProviderUpdating:q,updatingMap:J}=ce(),Y=C(()=>k().filter(e=>!e.hidden)),{speedGroupByName:pe}=ie(),[X,Z]=oe(p({}),{name:`collapsedMap`,storage:localStorage}),Q=(e,t)=>{Z(n=>({...n,[e]:t}))};le(O);let me=async(e,t)=>{e.stopPropagation(),W(t)},he=e=>e.replace(`<svg`,~e.indexOf(`xmlns`)?`<svg`:`<svg xmlns="http://www.w3.org/2000/svg"`).replace(/"/g,`'`).replace(/%/g,`%25`).replace(/#/g,`%23`).replace(/\{/g,`%7B`).replace(/\}/g,`%7D`).replace(/</g,`%3C`).replace(/>/g,`%3E`),ge=(e,t)=>{e.stopPropagation(),fe(t)},_e=(e,t)=>{e.stopPropagation(),P(t)},ve=async e=>{e.stopPropagation(),F()},[$,ye]=p(U.proxies),be=()=>[{type:U.proxies,name:h(`proxies`),count:Y().length},{type:U.proxyProviders,name:h(`proxyProviders`),count:N().length}];return[g(ae,{get children(){return h(`proxies`)}}),(()=>{var s=ue(),p=s.firstChild,m=p.firstChild,_=m.nextSibling,S=p.nextSibling;return n(m,g(D,{get each(){return be()},children:e=>(()=>{var t=L(),i=t.firstChild,a=i.nextSibling;return t.$$click=()=>ye(e.type),n(i,()=>e.name),n(a,()=>e.count),v(()=>f(t,r($()===e.type&&`bg-primary text-neutral!`,`sm:tab-md tab gap-2 px-2`))),t})()})),n(p,g(x,{get when(){return $()===U.proxyProviders},get children(){return g(A,{class:`btn btn-circle btn-sm`,get disabled(){return q()},onClick:e=>ve(e),get icon(){return g(t,{get class(){return r(q()&&`animate-spin text-success`)}})}})}}),_),n(_,g(A,{class:`btn-circle btn-sm btn-primary`,onClick:()=>c?.showModal(),get icon(){return g(o,{})}})),n(S,g(x,{get when(){return $()===U.proxies},get children(){return g(I,{get children(){return g(D,{get each(){return Y()},children:t=>{let o=C(()=>i({proxyNames:d({proxyNames:t.all??[],orderingType:w(),testUrl:t.testUrl||null}),enabled:re(),testUrl:t.testUrl||null}));return g(l,{get isOpen(){return X()[t.name]},title:(()=>{var i=B(),s=i.firstChild,c=s.firstChild,l=c.firstChild,u=l.nextSibling,d=s.nextSibling.firstChild,f=d.firstChild,p=d.nextSibling,m=p.firstChild;return n(c,g(x,{get when(){return t.icon},get children(){return g(x,{get when(){return t.icon.startsWith(`data:image/svg+xml`)},get fallback(){return(()=>{var e=V();return v(n=>{var r=t.icon,i=`${E()}px`,a=`${b()}px`;return r!==n.e&&ne(e,`src`,n.e=r),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),n},{e:void 0,t:void 0,a:void 0}),e})()},get children(){var e=R();return e.style.setProperty(`color`,`oklch(var(--p) / var(--tw-bg-opacity))`),e.style.setProperty(`background-color`,`currentColor`),e.style.setProperty(`mask-size`,`100% 100%`),v(n=>{var r=`${E()}px`,i=`${E()}px`,a=`${b()}px`,o=`url("${he(t.icon)}")`;return r!==n.e&&((n.e=r)==null?e.style.removeProperty(`height`):e.style.setProperty(`height`,r)),i!==n.t&&((n.t=i)==null?e.style.removeProperty(`width`):e.style.setProperty(`width`,i)),a!==n.a&&((n.a=a)==null?e.style.removeProperty(`margin-right`):e.style.setProperty(`margin-right`,a)),o!==n.o&&((n.o=o)==null?e.style.removeProperty(`mask-image`):e.style.setProperty(`mask-image`,o)),n},{e:void 0,t:void 0,a:void 0,o:void 0}),e}})}}),l),n(l,()=>t.name),n(u,()=>t.all?.length),n(s,g(A,{class:`btn-circle btn-sm`,get disabled(){return G()[t.name]},onClick:e=>me(e,t.name),get icon(){return g(M,{get class(){return r(G()[t.name]&&`animate-pulse text-success`)}})}}),null),n(f,()=>se(t.type)),n(d,g(x,{get when(){return t.now?.length>0},get children(){return[g(e,{size:18}),(()=>{var e=z();return n(e,()=>t.now),e})()]}}),null),n(p,()=>a(pe()[t.name]??0).toString(),m),n(i,g(x,{get when(){return!X()[t.name]},get children(){return g(T,{get proxyNameList(){return o()},get now(){return t.now},get testUrl(){return t.testUrl||null}})}}),null),i})(),onCollapse:e=>Q(t.name,e),get children(){return g(D,{get each(){return o()},children:e=>g(y,{proxyName:e,get testUrl(){return t.testUrl||null},get timeout(){return t.timeout??null},get isSelected(){return t.now===e},onClick:()=>void j(t,e)})})}})}})}})}}),null),n(S,g(x,{get when(){return $()===U.proxyProviders},get children(){return g(I,{get children(){return g(D,{get each(){return N()},children:e=>{let i=C(()=>d({orderingType:w(),proxyNames:e.proxies.map(e=>e.name)??[],testUrl:e.testUrl}));return g(l,{get isOpen(){return X()[e.name]},title:[(()=>{var i=H(),a=i.firstChild,o=a.firstChild,s=o.nextSibling,c=s.nextSibling,l=a.nextSibling;return n(o,()=>e.name),n(s,()=>e.proxies.length),n(c,()=>e.vehicleType),n(l,g(A,{class:`btn btn-circle btn-sm`,get disabled(){return J()[e.name]},onClick:t=>_e(t,e.name),get icon(){return g(t,{get class(){return r(J()[e.name]&&`animate-spin text-success`)}})}}),null),n(l,g(A,{class:`btn btn-circle btn-sm`,get disabled(){return K()[e.name]},onClick:t=>ge(t,e.name),get icon(){return g(M,{get class(){return r(K()[e.name]&&`animate-pulse text-success`)}})}}),null),i})(),g(te,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{var t=de(),r=t.firstChild,a=r.firstChild;return n(r,()=>h(`updated`),a),n(r,()=>u(e.updatedAt),null),n(t,g(x,{get when(){return!X()[e.name]},get children(){return g(T,{get proxyNameList(){return i()},get testUrl(){return e.testUrl}})}}),null),t})()],onCollapse:t=>Q(e.name,t),get children(){return g(D,{get each(){return i()},children:t=>g(y,{proxyName:t,get testUrl(){return e.testUrl},get timeout(){return e.timeout??null}})})}})}})}})}}),null),n(s,g(ee,{ref:e=>c=e}),null),s})()]};c([`click`]);export{W as default};